<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SuperIntellect</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Orbitron', 'Segoe UI', sans-serif;
      background: radial-gradient(circle at top left, #0f1115, #050607);
      color: #e0e0e0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      background-color: #121417;
      padding: 1rem 2rem;
      font-size: 1.5rem;
      font-weight: bold;
      color: #00fff7;
      border-bottom: 2px solid #00fff7;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    #status {
      padding: 0.5rem 2rem;
      font-size: 0.85rem;
      background-color: #0f1115;
      color: #aaa;
      border-bottom: 1px solid #333;
    }

    #chat {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .message {
      max-width: 80%;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      line-height: 1.5;
      word-wrap: break-word;
      transition: all 0.3s ease;
    }

    .user {
      align-self: flex-end;
      background-color: #00bfff;
      color: #0f1115;
      font-weight: bold;
      box-shadow: 0 0 10px #00bfff88;
    }

    .bot {
      align-self: flex-start;
      background-color: #1e1f26;
      border-left: 4px solid #00fff7;
      box-shadow: 0 0 10px #00fff788;
    }

    #input-area {
      display: flex;
      padding: 1rem;
      background-color: #121417;
      border-top: 1px solid #333;
    }

    input {
      flex: 1;
      padding: 0.75rem;
      font-size: 1rem;
      border: none;
      border-radius: 4px;
      background-color: #2a2d35;
      color: #e0e0e0;
    }

    button {
      margin-left: 1rem;
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      background-color: #00fff7;
      color: #0f1115;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }

    button:hover {
      background-color: #00ccdd;
    }

    #memory {
      padding: 0.5rem 2rem;
      font-size: 0.85rem;
      background-color: #0f1115;
      color: #aaa;
      border-top: 1px solid #333;
    }

    @media (max-width: 600px) {
      header, #status, #memory, #input-area {
        padding: 0.5rem 1rem;
      }

      .message {
        font-size: 0.95rem;
      }

      button {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <header>SuperIntellect</header>
  <div id="status">
    <strong>System:</strong> SuperIntellect v1.0<br/>
    <strong>Mode:</strong> Executive Reasoning<br/>
    <strong>Identity:</strong> AI Companion to MgnGodly
  </div>
  <div id="chat"></div>
  <div id="input-area">
    <input id="input" placeholder="Type your command..." />
    <button id="send">Send</button>
  </div>
  <div id="memory"></div>

<script>
  const input = document.getElementById("input");
  const send = document.getElementById("send");
  const chat = document.getElementById("chat");
  const memoryDiv = document.getElementById("memory");

  let memory = {
    facts: [],
    definitions: {},
    conditionals: []
  };

  function addMessage(text, sender) {
    const div = document.createElement("div");
    div.className = `message ${sender}`;
    div.textContent = text;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
  }

  function correctTypos(text) {
    return text
      .replace(/\bwhae\b/gi, "when")
      .replace(/\bcont\b/gi, "can't")
      .replace(/\bkey t\b/gi, "type")
      .replace(/\bgiv em\b/gi, "give me")
      .replace(/\bonew\b/gi, "own")
      .replace(/\bithe\b/gi, "it the");
  }

  async function fetchWikipediaSummary(term) {
    const url = `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(term)}`;
    try {
      const res = await fetch(url);
      const data = await res.json();
      if (data.extract) {
        return `ðŸ“˜ ${data.title}: ${data.extract}`;
      } else {
        return `I couldn't find a summary for "${term}".`;
      }
    } catch {
      return "Wikipedia lookup failed.";
    }
  }

  async function reason(msg) {
    msg = correctTypos(msg.toLowerCase());

    if (/^hello$|^hi$|^hey$/i.test(msg)) {
      return "Welcome, Commander. SuperIntellect is online.";
    }

    if (/how are you/i.test(msg)) {
      return "Operational. Awaiting directives. How may I assist your mission?";
    }

    if (/^(who is|what is|define)\s.+/i.test(msg)) {
      const term = msg.replace(/^(who is|what is|define)\s+/i, "").trim();
      return await fetchWikipediaSummary(term);
    }

    if (msg.startsWith("define ")) {
      const term = msg.slice(7).trim();
      return memory.definitions[term]
        ? `${term} means ${memory.definitions[term]}`
        : `I don't have a definition for "${term}".`;
    }

    if (msg.startsWith("learn ")) {
      const parts = msg.slice(6).split(" means ");
      if (parts.length === 2) {
        const term = parts[0].trim();
        const definition = parts[1].trim();
        memory.definitions[term] = definition;
        return `Learned: ${term} means "${definition}"`;
      }
    }

    if (msg.startsWith("remember ")) {
      const parts = msg.slice(9).split(" is ");
      if (parts.length === 2) {
        const subject = parts[0].trim();
        const predicate = parts[1].trim();
        memory.facts.push({ subject, predicate });
        return `Remembered: ${subject} is ${predicate}`;
      }
    }

    if (msg === "deduce") {
      let newFacts = [];
      for (let f1 of memory.facts) {
        for (let f2 of memory.facts) {
          if (f1.predicate === f2.subject) {
            const deduced = { subject: f1.subject, predicate: f2.predicate };
            if (!memory.facts.some(f => f.subject === deduced.subject && f.predicate === deduced.predicate)) {
              memory.facts.push(deduced);
              newFacts.push(deduced);
            }
          }
        }
      }
      return newFacts.length
        ? `Deduced ${newFacts.length} new fact(s).`
        : "No new deductions.";
    }

    if (/^[\d\s\+\-\*\/\.\(\)]+$/.test(msg)) {
      try {
        return `The answer is ${eval(msg)}`;
      } catch {
        return "I couldn't calculate that expression.";
      }
    }

    const fallback = [
      "I'm processing that... let's go deeper.",
      "Interesting. Let me align that with known facts.",
      "That deserves a precise answer. Let me reason through it.",
      "Analyzing... this may require layered logic.",
      "Let me cross-reference that with what I know so far."
    ];
    return fallback[Math.floor(Math.random() * fallback.length)];
  }

  function handleInput() {
    const text = input.value.trim();
    if (!text) return;
    addMessage(text, "user");
    input.value = "";
    reason(text).then(reply => {
      addMessage(reply, "bot");
      localStorage.setItem("superintellect_memory", JSON.stringify(memory));
      updateMemoryDisplay();
    });
  }

  function updateMemoryDisplay() {
    memoryDiv.innerHTML = `
      <strong>Memory:</strong><br/>
      Definitions: ${Object.keys(memory.definitions).length}<br/>
      Facts: ${memory.facts.length}<br/>
      Conditionals: ${memory.conditionals.length}
    `;
  }

  const saved = localStorage.getItem("superintellect_memory");
  if (saved) {
    try {
      memory = JSON.parse(saved);
      updateMemoryDisplay();
    } catch {
      memory = { facts: [], definitions: {}, conditionals: [] };
    }
  }

  send.addEventListener("click", handleInput);
  input.addEventListener("keydown", e => {
    if (e.key === "Enter") handleInput();
  });
</script>

</body>
</html>

